<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Copyright 2019 WeBank
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~
  -->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >


<mapper namespace="kw.kd.dss.dao.qualitis.QualitisMapper">

    <sql id="qualitis_project">
      id,`create_user`,`create_user_full_name`,`description`,`name`, `project_type`,`user_department`
    </sql>
    <sql id="qualitis_project_user">
      id,`permission`,`user_full_name`,`user_name`,`project_id`
    </sql>

    <select id="queryQualitiesProject" resultType="kw.kd.dss.entity.qualitis.DWSQualitisProject">
        SELECT *  FROM qualitis_project WHERE id = #{id}
    </select>

    <select id="queryQualitiesProjectUser" resultType="kw.kd.dss.entity.qualitis.DWSQualitisProjectUser">
        SELECT *  FROM qualitis_project_user WHERE project_id = #{id}
    </select>

    <insert id="insertQualitiesProject"  useGeneratedKeys="true" keyProperty="id" parameterType="kw.kd.dss.entity.qualitis.DWSQualitisProject">
            INSERT INTO qualitis_project (<include refid = "qualitis_project" />)
            VALUES
            (#{id},#{createUser},#{createUserFullName},#{description},#{name},#{projectType},#{userDepartment})
    </insert>

    <insert id="insertQualitiesProjectUser"  useGeneratedKeys="true" keyProperty="id" parameterType="kw.kd.dss.entity.qualitis.DWSQualitisProjectUser">
        INSERT INTO qualitis_project_user (<include refid = "qualitis_project_user" />)
        VALUES
        (#{id},#{permission},#{userFullName},#{userName},#{projectID})
    </insert>
</mapper>